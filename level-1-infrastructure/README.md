# Level 1: 인프라 기초

> 모바일 개발자가 테크리드로 성장하기 위한 첫 번째 단계

## 왜 인프라를 알아야 할까요?

모바일 개발자로서 "내 앱에서 API 호출이 느려요", "서버 에러가 발생했어요"라는 문제를 마주했을 때, 클라이언트 코드만 봐서는 원인을 파악하기 어렵습니다. 앱이 서버와 통신하는 전체 과정을 이해하면:

- **디버깅 능력 향상**: 502 에러가 Nginx 문제인지, 백엔드 서버 문제인지 구분할 수 있습니다.
- **협업 효율성**: 백엔드/인프라 팀과 같은 언어로 소통할 수 있습니다.
- **아키텍처 이해**: 전체 시스템 관점에서 앱의 위치와 역할을 파악합니다.
- **테크리드 역량**: 기술적 의사결정 시 인프라 비용과 성능을 고려할 수 있습니다.

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                    모바일 앱의 서버 통신 전체 그림                              │
└─────────────────────────────────────────────────────────────────────────────┘

  ┌────────────┐                                           ┌────────────────┐
  │ Mobile App │                                           │  Backend API   │
  │ (iOS/      │   인터넷을 통해 어떤 일이 일어나는가?         │   Server       │
  │  Android)  │                                           │                │
  └─────┬──────┘                                           └────────┬───────┘
        │                                                           │
        │   1. DNS 조회: api.example.com → 203.0.113.10             │
        │   2. TCP 3-way Handshake: 연결 수립                        │
        │   3. TLS Handshake: 암호화 채널 설정                        │
        │   4. HTTP 요청: GET /api/users                            │
        │   5. Nginx: 리버스 프록시, 로드 밸런싱                      │
        │   6. Docker 컨테이너에서 실행 중인 백엔드 처리               │
        │   7. HTTP 응답: JSON 데이터                               │
        │                                                           │
        └───────────────────────────────────────────────────────────┘

  이 모든 과정을 이해하는 것이 Level 1의 목표입니다.
```

## 학습 목표

이 레벨을 완료하면 다음을 할 수 있게 됩니다:

1. **서버가 어떻게 동작하는지 이해**: 클라이언트가 서버에 요청을 보내고 응답을 받는 전체 과정을 파악합니다.
2. **네트워크 기본 구조 파악**: HTTP, TCP/IP, DNS 등 네트워크의 핵심 개념을 이해합니다.
3. **서버 환경 기본 조작**: Linux 명령어로 로그 확인, 프로세스 관리 등 기본적인 서버 작업을 수행합니다.
4. **웹 서버 이해**: Nginx가 어떤 역할을 하는지, 왜 백엔드 앞에 두는지 이해합니다.
5. **컨테이너 개념 이해**: Docker를 통해 애플리케이션 배포의 현대적 방식을 학습합니다.

## 학습 내용

| 순서 | 주제 | 설명 | 핵심 키워드 | 문서 |
|------|------|------|-------------|------|
| 1 | HTTP/HTTPS | 웹 통신의 기본 프로토콜 | 메서드, 상태코드, TLS, Certificate Pinning | [01-http-https.md](./01-http-https.md) |
| 2 | TCP/UDP | 전송 계층 프로토콜의 이해 | 3-way Handshake, 신뢰성, WebSocket, QUIC | [02-tcp-udp.md](./02-tcp-udp.md) |
| 3 | DNS | 도메인 이름 시스템의 동작 원리 | DNS 캐싱, TTL, DoH/DoT, GeoDNS | [03-dns.md](./03-dns.md) |
| 4 | Linux 기본 | 서버 운영체제의 기초 | 파일시스템, 권한, 프로세스, SSH | [04-linux-basics.md](./04-linux-basics.md) |
| 5 | Nginx | 웹 서버와 리버스 프록시 | 로드밸런싱, SSL 종료, 캐싱, Rate Limiting | [05-nginx.md](./05-nginx.md) |
| 6 | Docker | 컨테이너 기반 배포 | 이미지, 컨테이너, Compose, 볼륨 | [06-docker.md](./06-docker.md) |

### 권장 학습 순서와 연결 관계

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                         학습 순서 및 주제 간 연결                              │
└─────────────────────────────────────────────────────────────────────────────┘

  ┌─────────────────┐
  │  1. HTTP/HTTPS  │ ← 앱에서 API 호출의 기본
  └────────┬────────┘
           │ HTTP는 TCP 위에서 동작
           ▼
  ┌─────────────────┐
  │   2. TCP/UDP    │ ← 신뢰성 있는 데이터 전송의 원리
  └────────┬────────┘
           │ TCP 연결 전에 IP 주소 필요
           ▼
  ┌─────────────────┐
  │     3. DNS      │ ← 도메인 → IP 주소 변환
  └────────┬────────┘
           │ 서버에서 실행되는 환경
           ▼
  ┌─────────────────┐
  │   4. Linux      │ ← 서버 OS 기본 조작
  └────────┬────────┘
           │ 웹 서버 소프트웨어
           ▼
  ┌─────────────────┐
  │    5. Nginx     │ ← 리버스 프록시, 로드 밸런싱
  └────────┬────────┘
           │ 백엔드 배포 방식
           ▼
  ┌─────────────────┐
  │   6. Docker     │ ← 컨테이너화된 배포
  └─────────────────┘

각 주제는 서로 연결되어 있습니다:
- HTTP 요청이 느리다면 → TCP 연결 문제? DNS 조회 지연?
- 502 에러가 발생한다면 → Nginx 설정 문제? Docker 컨테이너 상태?
- HTTPS 인증서 에러라면 → DNS 설정? Nginx SSL 설정?
```

## 모바일 개발자를 위한 학습 포인트

각 주제별로 모바일 개발과 직접 연관되는 핵심 내용입니다:

### HTTP/HTTPS
- iOS ATS(App Transport Security)가 HTTPS를 강제하는 이유
- Android Network Security Config 설정 방법
- Certificate Pinning으로 MITM 공격 방어
- HTTP/2, HTTP/3이 앱 성능에 미치는 영향

### TCP/UDP
- WebSocket으로 실시간 채팅 구현하기
- 네트워크 전환(Wi-Fi ↔ LTE) 시 연결 유지 방법
- 게임 앱에서 UDP를 사용하는 이유

### DNS
- 앱에서 DNS 조회가 느릴 때 원인 분석
- CDN과 GeoDNS로 글로벌 앱 성능 개선
- 딥링크/앱링크를 위한 DNS 설정

### Linux
- 서버 로그로 API 문제 디버깅하기
- SSH로 서버 접속하여 상태 확인
- 백엔드 팀에게 "로그 좀 봐주세요" 대신 직접 확인

### Nginx
- API 타임아웃과 Nginx proxy_read_timeout의 관계
- 파일 업로드 실패 시 client_max_body_size 확인
- CORS 에러 해결을 위한 Nginx 설정

### Docker
- 로컬에서 백엔드 API 실행하여 오프라인 개발
- 새 팀원에게 개발 환경 공유하기
- CI/CD에서 일관된 테스트 환경 구축

## AI 학습 프롬프트

다음 프롬프트를 활용하여 더 깊이 학습해보세요.

### HTTP/HTTPS 관련
```
"모바일 앱에서 API 호출 시 HTTP와 HTTPS의 차이점을 설명해주세요.
특히 iOS의 App Transport Security(ATS)와 Android의 Network Security Config 관점에서 설명해주세요."
```

```
"HTTP/1.1, HTTP/2, HTTP/3의 차이점을 모바일 앱 성능 관점에서 설명해주세요.
각 버전에서 개선된 점과 모바일에서의 장점은 무엇인가요?"
```

### TCP/UDP 관련
```
"실시간 채팅 앱을 만들 때 TCP와 UDP 중 어떤 것을 선택해야 할까요?
WebSocket은 어떤 프로토콜 위에서 동작하나요?"
```

```
"모바일 앱에서 Wi-Fi에서 LTE로 네트워크가 전환될 때 TCP 연결은 어떻게 되나요?
연결을 유지하려면 어떤 방법을 사용해야 할까요?"
```

### DNS 관련
```
"모바일 앱에서 도메인 이름으로 API를 호출할 때 어떤 과정이 일어나는지 단계별로 설명해주세요.
DNS 캐싱은 어디서 발생하나요?"
```

```
"글로벌 서비스에서 GeoDNS와 CDN은 어떻게 함께 동작하나요?
한국 사용자와 미국 사용자가 같은 앱을 사용할 때 어떤 차이가 있나요?"
```

### Linux 관련
```
"서버에 SSH로 접속해서 로그를 확인하고 싶습니다.
가장 자주 사용하는 Linux 명령어 10가지와 각각의 사용 예시를 알려주세요."
```

```
"모바일 앱에서 특정 API 호출이 500 에러를 반환합니다.
서버에 접속해서 원인을 찾으려면 어떤 순서로 어떤 명령어를 실행해야 할까요?"
```

### Nginx 관련
```
"모바일 앱 백엔드 서버 앞에 Nginx를 두는 이유가 무엇인가요?
리버스 프록시, 로드 밸런싱, SSL 종료가 무엇인지 설명해주세요."
```

```
"모바일 앱에서 대용량 파일 업로드 시 '413 Request Entity Too Large' 에러가 발생합니다.
Nginx에서 어떻게 해결할 수 있나요?"
```

### Docker 관련
```
"Docker 컨테이너와 가상 머신(VM)의 차이점은 무엇인가요?
왜 요즘 서버 배포에 Docker를 많이 사용하나요?"
```

```
"모바일 개발자가 로컬에서 백엔드 API를 테스트하려면 어떻게 Docker를 사용할 수 있나요?
docker-compose로 API + DB를 한 번에 실행하는 방법을 알려주세요."
```

## 산출물

이 레벨을 완료하면 다음 산출물을 만들어야 합니다.

### 1. 네트워크 구조 다이어그램
- 모바일 앱이 서버에 요청을 보낼 때 거치는 모든 단계를 시각화
- DNS 조회, TCP 연결, TLS 핸드셰이크, HTTP 요청/응답 과정 포함
- draw.io, Excalidraw, 또는 Mermaid로 작성

```
예시 구조:
[Mobile App] → [DNS Resolver] → [CDN/WAF] → [Load Balancer]
            → [Nginx] → [API Server (Docker)] → [Database]
```

### 2. 서버 요청 흐름 문서
- 실제 서비스(예: 로그인 API 호출)의 전체 흐름 문서화
- 각 단계에서 발생할 수 있는 에러와 디버깅 방법 포함
- 마크다운 또는 Notion으로 작성

```
포함 내용:
1. 클라이언트 → DNS 조회 (캐시 확인, 재귀 쿼리)
2. TCP 연결 수립 (3-way handshake)
3. TLS 협상 (인증서 검증, 암호화 방식 선택)
4. HTTP 요청 전송 (메서드, 헤더, 바디)
5. 로드밸런서 → 웹서버 (Nginx)
6. 리버스 프록시 → 백엔드 (Docker 컨테이너)
7. 백엔드 → 데이터베이스
8. 응답 반환 (역순)
```

### 3. Docker 개발 환경 구성
- 프로젝트 백엔드를 로컬에서 실행하는 docker-compose.yml 작성
- 최소 API 서버 + 데이터베이스 구성
- README에 실행 방법 문서화

```yaml
# 예시 docker-compose.yml
version: '3.8'
services:
  api:
    image: backend-api:latest
    ports:
      - "8080:8080"
    environment:
      - DATABASE_URL=postgresql://db:5432/myapp
    depends_on:
      - db

  db:
    image: postgres:15-alpine
    environment:
      - POSTGRES_DB=myapp
      - POSTGRES_PASSWORD=localdev
    volumes:
      - pgdata:/var/lib/postgresql/data

volumes:
  pgdata:
```

### 4. 서버 디버깅 치트시트
- 자주 발생하는 에러 코드와 원인/해결책 정리
- 유용한 Linux 명령어 모음
- Nginx/Docker 디버깅 명령어

```
예시:
| 에러 | 가능한 원인 | 확인 방법 | 해결책 |
|------|------------|----------|--------|
| 502 Bad Gateway | 백엔드 서버 다운 | docker ps, curl localhost:3000 | docker restart api |
| 504 Gateway Timeout | 백엔드 응답 지연 | nginx 로그 확인 | proxy_read_timeout 증가 |
| Connection Refused | 포트 미개방 | netstat -tlnp | docker-compose up -d |
```

## 학습 팁

### 1. 모바일 개발자 관점에서 생각하기
- "내가 만든 앱에서 API를 호출하면 어떤 일이 일어날까?"라는 질문에서 시작하세요.
- 익숙한 에러(타임아웃, 연결 실패, 인증서 에러)의 서버 측 원인을 추적해보세요.

### 2. 직접 손으로 해보기
```bash
# 로컬에 Docker로 Nginx 서버를 띄워보세요
docker run -d -p 8080:80 --name my-nginx nginx

# curl로 요청을 보내보세요
curl -v http://localhost:8080

# 로그를 확인해보세요
docker logs my-nginx

# 정리
docker stop my-nginx && docker rm my-nginx
```

### 3. 로그 읽는 습관 들이기
- Charles Proxy나 Proxyman으로 앱의 네트워크 트래픽을 분석해보세요.
- 서버 로그를 읽으면서 실제로 어떤 요청이 오는지 확인해보세요.

### 4. 작은 실험하기
```bash
# DNS 조회 과정 확인
nslookup api.example.com
dig api.example.com +trace

# TCP 연결 확인
telnet api.example.com 443
nc -zv api.example.com 443

# HTTP 요청 상세 보기
curl -v -X GET https://api.example.com/health
```

### 5. 문서의 "내 생각" 섹션 활용하기
각 문서에는 "내 생각" 섹션이 있습니다. 학습 후 자신의 언어로 정리하면 이해도가 높아집니다.

## 체크리스트

학습을 완료했는지 확인하세요:

- [ ] HTTP 상태 코드(200, 400, 401, 403, 404, 500, 502, 503, 504)의 의미를 설명할 수 있다
- [ ] TCP 3-way handshake가 무엇인지 설명할 수 있다
- [ ] DNS 조회 과정과 캐싱 레이어를 설명할 수 있다
- [ ] Linux에서 로그 확인, 프로세스 관리 명령어를 사용할 수 있다
- [ ] Nginx가 리버스 프록시로서 하는 역할을 설명할 수 있다
- [ ] Docker로 컨테이너를 실행하고 로그를 확인할 수 있다
- [ ] docker-compose로 멀티 컨테이너 환경을 구성할 수 있다
- [ ] 모바일 앱에서 발생하는 네트워크 에러의 서버 측 원인을 추측할 수 있다

## 예상 학습 시간

| 주제 | 읽기 | 실습 | 총 시간 |
|------|------|------|---------|
| HTTP/HTTPS | 30분 | 1시간 | 1.5시간 |
| TCP/UDP | 30분 | 30분 | 1시간 |
| DNS | 20분 | 30분 | 50분 |
| Linux | 30분 | 1시간 | 1.5시간 |
| Nginx | 30분 | 1시간 | 1.5시간 |
| Docker | 40분 | 1.5시간 | 2시간 |
| **총계** | **3시간** | **5.5시간** | **8.5시간** |

*실습 시간은 개인차가 있을 수 있습니다. 천천히 이해하면서 진행하세요.*

## 다음 단계

Level 1을 완료하면 [Level 2: 백엔드 기초](../level-2-backend/README.md)로 진행합니다.

Level 2에서는:
- REST API 설계 원칙
- 데이터베이스 기초 (SQL, NoSQL)
- 인증/인가 (JWT, OAuth)
- 캐싱 전략 (Redis)

를 학습합니다.
