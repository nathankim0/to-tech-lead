# Level 2: 백엔드 아키텍처

## 왜 모바일 개발자가 백엔드를 알아야 할까?

모바일 앱은 **서버 API 위에서 동작**합니다. 백엔드를 이해하면:

- **API 응답이 느릴 때** 원인을 파악하고 백엔드 팀과 효과적으로 소통할 수 있습니다
- **인증 토큰 만료** 시 발생하는 문제를 정확히 이해하고 대응할 수 있습니다
- **서버 장애** 상황에서 앱의 우아한 폴백 처리를 설계할 수 있습니다
- **테크리드**로서 풀스택 관점의 기술 의사결정을 내릴 수 있습니다

```
모바일 앱이 마주치는 백엔드 기술들
───────────────────────────────────────────────────────

┌──────────────────────────────────────────────────────────────────┐
│                        모바일 앱                                  │
│                    (iOS / Android)                               │
└───────────────────────────┬──────────────────────────────────────┘
                            │
                            │ REST API / GraphQL
                            │ JWT Token
                            ▼
┌──────────────────────────────────────────────────────────────────┐
│                     API Gateway                                   │
│            (인증, 라우팅, Rate Limiting)                          │
└───────────────────────────┬──────────────────────────────────────┘
                            │
        ┌───────────────────┼───────────────────┐
        │                   │                   │
        ▼                   ▼                   ▼
┌───────────────┐   ┌───────────────┐   ┌───────────────┐
│    서버       │   │    Redis      │   │    Kafka      │
│  (비즈니스)   │   │   (캐시)      │   │   (메시징)    │
└───────┬───────┘   └───────────────┘   └───────────────┘
        │
        │
        ▼
┌───────────────────────────────────────────────────────────────────┐
│                      Database                                      │
│               (MySQL, PostgreSQL, MongoDB)                         │
└───────────────────────────────────────────────────────────────────┘
```

---

## 학습 목표

모바일 개발자에서 테크리드로 성장하기 위해 반드시 이해해야 할 백엔드 핵심 개념들을 학습합니다.

- **REST API 설계 원칙**: 클라이언트-서버 통신의 기본
- **인증/인가 구조**: JWT, OAuth로 안전한 사용자 인증
- **데이터 저장소**: SQL/NoSQL의 특성과 선택 기준
- **캐싱 전략**: Redis로 API 응답 속도 개선
- **비동기 처리**: 메시지 큐로 대용량 트래픽 처리

---

## 학습 내용

| 순서 | 주제 | 핵심 내용 | 모바일 앱과의 연관성 |
|:---:|:---|:---|:---|
| 1 | [REST API 설계](./01-rest-api.md) | HTTP 메서드, 상태 코드, 버전 관리 | API 호출, 에러 처리, 오프라인 대응 |
| 2 | [JWT / OAuth](./02-jwt-oauth.md) | 토큰 기반 인증, 소셜 로그인 | 로그인 유지, 토큰 갱신, 보안 저장 |
| 3 | [Database 구조](./03-database.md) | SQL/NoSQL, 인덱싱, 트랜잭션 | 로컬 DB 동기화, API 응답 구조 이해 |
| 4 | [Redis](./04-redis.md) | 캐싱, 세션, Rate Limiting | 빠른 API 응답, 실시간 기능 |
| 5 | [Kafka / SQS](./05-kafka-sqs.md) | 메시지 큐, 비동기 처리 | 푸시 알림, 비동기 작업 완료 처리 |

---

## 주제 간 연관성

각 주제는 서로 밀접하게 연결되어 있습니다.

```
주제 간 연관 관계
───────────────────────────────────────────────────────

                ┌─────────────────┐
                │   REST API     │
                │   (01)         │
                └────────┬───────┘
                         │
         ┌───────────────┼───────────────┐
         │               │               │
         ▼               ▼               ▼
┌─────────────┐   ┌─────────────┐   ┌─────────────┐
│ JWT/OAuth   │   │  Database   │   │   Redis     │
│ (02)        │   │  (03)       │   │   (04)      │
│             │   │             │   │             │
│ 인증 토큰   │   │ 데이터 저장  │   │ 캐싱/세션   │
│ 보안        │   │ 쿼리 성능   │   │ Rate Limit │
└─────────────┘   └──────┬──────┘   └──────┬──────┘
                         │                  │
                         └────────┬─────────┘
                                  │
                                  ▼
                         ┌─────────────┐
                         │ Kafka/SQS  │
                         │ (05)       │
                         │            │
                         │ 비동기처리  │
                         │ 이벤트기반  │
                         └─────────────┘

연관성 예시:
─────────────────────────────────────────────────
• REST API 인증에 JWT 사용 (01 ↔ 02)
• API 응답 캐싱에 Redis 사용 (01 ↔ 04)
• 세션 저장소로 Redis 사용 (02 ↔ 04)
• N+1 쿼리 해결에 캐싱 활용 (03 ↔ 04)
• DB 변경 이벤트를 Kafka로 전파 (03 ↔ 05)
• Rate Limiting 정보를 Redis에 저장 (01 ↔ 04)
```

---

## 학습 순서 가이드

### 권장 순서

1. **01-rest-api.md**: 가장 기본이 되는 HTTP 통신 이해
2. **02-jwt-oauth.md**: 인증 없이는 대부분의 API를 사용할 수 없음
3. **03-database.md**: 서버 데이터가 어떻게 저장되는지 이해
4. **04-redis.md**: 캐싱으로 성능 문제 해결 방법 학습
5. **05-kafka-sqs.md**: 대규모 서비스의 비동기 처리 이해

### 빠르게 훑어보기 (각 15분)

시간이 부족하다면 각 문서의 다음 섹션만 먼저 읽으세요:
- **쉽게 설명** - 핵심 개념 이해
- **구조 다이어그램** - 시각적 이해
- **장단점** - 트레이드오프 파악

### 심화 학습

각 문서의 **추가 질문** 섹션에 있는 질문들에 대한 상세한 답변이 포함되어 있습니다. 답변을 읽고 이해가 안 되는 부분은 AI에게 추가 질문하세요.

---

## AI 학습 프롬프트

다음 프롬프트를 활용하여 더 깊이 있는 학습을 진행하세요.

### 기본 학습 프롬프트

```
당신은 10년 경력의 시니어 백엔드 개발자입니다.
대규모 트래픽을 처리하는 서비스를 여러 번 구축한 경험이 있습니다.

저는 모바일 개발자로서 백엔드 아키텍처를 학습하고 있습니다.
다음 주제에 대해 설명해주세요:

1. [주제]가 왜 필요한지 실제 서비스 사례와 함께 설명해주세요
2. 모바일 앱과 어떻게 연동되는지 구체적인 예시를 들어주세요
3. 초보자가 흔히 하는 실수와 해결 방법을 알려주세요
4. 실무에서 자주 마주치는 문제 상황과 해결 패턴을 공유해주세요
```

### 주제별 심화 질문 예시

**REST API 관련:**
```
우리 서비스에서 API 버전 관리를 어떻게 해야 할까요?
기존 v1 API를 사용하는 구버전 앱과 v2 API를 사용하는 신버전 앱이 공존해야 합니다.
```

**인증 관련:**
```
Access Token이 만료되었을 때 Refresh Token으로 갱신하는 과정에서
동시에 여러 API를 호출하면 어떤 문제가 발생할 수 있나요?
```

**데이터베이스 관련:**
```
사용자 수가 급증해서 DB 조회가 느려졌습니다.
인덱스 추가 외에 어떤 방법으로 성능을 개선할 수 있을까요?
```

**Redis 관련:**
```
캐시 무효화 타이밍을 어떻게 결정해야 할까요?
상품 정보가 수정되었을 때 캐시를 언제 갱신해야 하나요?
```

**메시지 큐 관련:**
```
주문 완료 후 알림 발송이 비동기로 처리될 때,
앱에서는 주문 완료 상태를 어떻게 확인해야 할까요?
```

---

## 학습 팁

### 1. 모바일 개발자의 시각을 유지하세요

백엔드를 학습할 때 "이 기술이 모바일 앱에 어떤 영향을 주는가?"라는 질문을 계속 던지세요.

- API 응답 시간이 느리면 앱 UX가 어떻게 될까?
- 서버가 다운되면 앱은 어떻게 대응해야 할까?
- 인증 토큰이 탈취되면 어떤 일이 벌어질까?

### 2. 실제 서비스에서 경험해보세요

- 앱에서 네트워크 탭(Charles, Proxyman)으로 API 요청/응답 분석
- 의도적으로 오프라인 모드에서 앱 테스트
- 토큰 만료 상황 시뮬레이션

### 3. 백엔드 개발자와 대화하세요

이 문서에서 배운 용어로 백엔드 개발자와 기술 대화를 시도해보세요.

- "이 API에 캐싱이 적용되어 있나요? TTL은 얼마인가요?"
- "결제 API는 멱등성이 보장되나요?"
- "이 데이터 변경은 이벤트로 발행되나요?"

### 4. 직접 만들어보세요

간단한 백엔드 서버를 직접 만들어보면 이해가 훨씬 빨라집니다.

- Node.js + Express로 REST API 서버 만들기
- Redis로 캐싱 적용해보기
- JWT 인증 직접 구현해보기

---

## 산출물

이 레벨을 완료한 후 다음 산출물을 정리해보세요.

### 1. API 설계 문서
- 담당 서비스의 주요 API 엔드포인트 목록
- 요청/응답 스키마 정의
- 에러 코드 체계

### 2. 인증 구조 정리
- 서비스의 인증 플로우 다이어그램
- 토큰 저장 및 갱신 전략
- 보안 체크리스트

### 3. 캐시 적용 사례
- 캐시가 필요한 데이터 목록
- 캐시 전략 (TTL, 무효화 정책)
- 적용 전후 성능 비교

---

## 자가 점검 체크리스트

각 주제 학습 후 스스로 점검해보세요.

```
REST API
□ HTTP 상태 코드 200, 201, 400, 401, 403, 404, 500의 의미를 설명할 수 있다
□ PUT과 PATCH의 차이를 설명할 수 있다
□ API 버전 관리 방법 3가지를 알고 있다
□ 멱등성이 무엇인지, 왜 중요한지 설명할 수 있다

JWT / OAuth
□ JWT의 구조(Header, Payload, Signature)를 설명할 수 있다
□ Access Token과 Refresh Token의 역할 차이를 설명할 수 있다
□ PKCE가 왜 필요한지 설명할 수 있다
□ 토큰을 안전하게 저장하는 방법(Keychain, EncryptedSharedPreferences)을 알고 있다

Database
□ SQL과 NoSQL의 차이와 선택 기준을 설명할 수 있다
□ 인덱스가 왜 필요하고 어떻게 동작하는지 설명할 수 있다
□ N+1 문제가 무엇이고 해결 방법을 알고 있다
□ 트랜잭션과 ACID 속성을 설명할 수 있다

Redis
□ 캐시가 왜 필요하고 어떻게 성능을 개선하는지 설명할 수 있다
□ Cache-Aside 패턴을 설명할 수 있다
□ TTL이 무엇이고 어떻게 설정해야 하는지 알고 있다
□ Cache Stampede 문제와 해결책을 설명할 수 있다

Kafka / SQS
□ 동기 처리와 비동기 처리의 차이를 설명할 수 있다
□ 메시지 큐가 왜 필요한지 예시를 들어 설명할 수 있다
□ At-least-once, At-most-once, Exactly-once의 차이를 설명할 수 있다
□ Dead Letter Queue가 왜 필요한지 설명할 수 있다
```

---

## 다음 단계

Level 2를 완료했다면 [Level 3: 데이터 파이프라인](../level-3-data-pipeline/)으로 진행하세요.

---

## 변경 이력

| 날짜 | 변경 내용 |
|:---|:---|
| 2024-01 | 초기 버전 작성 |
| 2024-01 | 추가 질문 답변 및 모바일 관점 내용 보강 |
