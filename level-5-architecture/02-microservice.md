# Microservice Architecture

## 1. í•œ ì¤„ ìš”ì•½

**í•˜ë‚˜ì˜ í° ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë…ë¦½ì ìœ¼ë¡œ ë°°í¬ ê°€ëŠ¥í•œ ì‘ì€ ì„œë¹„ìŠ¤ë“¤ë¡œ ë¶„ë¦¬í•˜ì—¬, ê° ì„œë¹„ìŠ¤ê°€ ìì²´ ë°ì´í„°ë² ì´ìŠ¤ì™€ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ê°€ì§€ê³  ìš´ì˜ë˜ëŠ” ì•„í‚¤í…ì²˜**

---

## 2. ì‰½ê²Œ ì„¤ëª…

### ëª¨ë°”ì¼ ê°œë°œìë¥¼ ìœ„í•œ ë¹„ìœ 

ëª¨ë°”ì¼ ê°œë°œìì—ê²Œ Microserviceë¥¼ ì„¤ëª…í•˜ìë©´, **ì•± ëª¨ë“ˆí™”**ì™€ ë¹„ìŠ·í•©ë‹ˆë‹¤.

```
ëª¨ë°”ì¼ ì•± ëª¨ë“ˆí™”                    ì„œë²„ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
:feature-home                    User Service
:feature-search                  Product Service
:feature-cart                    Cart Service
:feature-payment                 Payment Service
    â”‚                                â”‚
    â–¼                                â–¼
ê° ëª¨ë“ˆì´ ë…ë¦½ì ì¸              ê° ì„œë¹„ìŠ¤ê°€ ë…ë¦½ì ì¸
ë¹Œë“œ/í…ŒìŠ¤íŠ¸ ê°€ëŠ¥                ë°°í¬/ìŠ¤ì¼€ì¼ë§ ê°€ëŠ¥
```

í•˜ì§€ë§Œ ì¤‘ìš”í•œ ì°¨ì´ê°€ ìˆìŠµë‹ˆë‹¤:

| ëª¨ë°”ì¼ ëª¨ë“ˆí™” | ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ |
|:---|:---|
| í•˜ë‚˜ì˜ ì•±ìœ¼ë¡œ ë¹Œë“œë¨ | ê°ê° ë³„ë„ì˜ ì„œë²„ë¡œ ìš´ì˜ |
| ê°™ì€ ë©”ëª¨ë¦¬ ê³µê°„ ê³µìœ  | ë„¤íŠ¸ì›Œí¬ë¡œ í†µì‹  |
| ë²„ì „ ë™ê¸°í™” | ë…ë¦½ì ì¸ ë°°í¬ |

### ì™œ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ê°€ í•„ìš”í•œê°€?

ëª¨ë†€ë¦¬ì‹(í•˜ë‚˜ì˜ í° ì„œë²„)ì˜ ë¬¸ì œë¥¼ ìƒê°í•´ë³´ì„¸ìš”:

```
ëª¨ë†€ë¦¬ì‹ì˜ ë¬¸ì œì 
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1. ë°°í¬ ê³µí¬ì¦
   - í•œ ì¤„ ìˆ˜ì •í•´ë„ ì „ì²´ ë°°í¬
   - ë°°í¬í•  ë•Œë§ˆë‹¤ ê¸´ì¥ ğŸ˜°

2. í™•ì¥ì˜ í•œê³„
   - ê²€ìƒ‰ë§Œ íŠ¸ë˜í”½ì´ ë§ì•„ë„ ì „ì²´ ì„œë²„ë¥¼ ëŠ˜ë ¤ì•¼ í•¨
   - ë¹„ìš© ë‚­ë¹„ ğŸ’¸

3. ê¸°ìˆ  ë¶€ì±„
   - í•œ íŒ€ì˜ ì‹¤ìˆ˜ê°€ ì „ì²´ì— ì˜í–¥
   - ì½”ë“œë² ì´ìŠ¤ê°€ ì»¤ì§€ë©´ì„œ ë¹Œë“œ ì‹œê°„ ì¦ê°€

4. íŒ€ ë³‘ëª©
   - ì—¬ëŸ¬ íŒ€ì´ í•˜ë‚˜ì˜ ì½”ë“œë² ì´ìŠ¤ì—ì„œ ì‘ì—…
   - ë¨¸ì§€ ì¶©ëŒ ì§€ì˜¥ ğŸ”¥
```

ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ëŠ” ì´ëŸ° ë¬¸ì œë¥¼ í•´ê²°í•©ë‹ˆë‹¤:

```
ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ì˜ í•´ê²°ì±…
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1. ë…ë¦½ ë°°í¬
   - User Serviceë§Œ ìˆ˜ì •í•˜ë©´ User Serviceë§Œ ë°°í¬

2. ê°œë³„ í™•ì¥
   - ê²€ìƒ‰ íŠ¸ë˜í”½ì´ ë§ìœ¼ë©´ Search Serviceë§Œ ëŠ˜ë¦¼

3. ì¥ì•  ê²©ë¦¬
   - Payment Serviceì— ë¬¸ì œê°€ ìƒê²¨ë„ ë‹¤ë¥¸ ì„œë¹„ìŠ¤ëŠ” ì •ìƒ

4. íŒ€ ììœ¨ì„±
   - ê° íŒ€ì´ ë‹´ë‹¹ ì„œë¹„ìŠ¤ë¥¼ ììœ¨ì ìœ¼ë¡œ ìš´ì˜
```

---

## 3. êµ¬ì¡° ë‹¤ì´ì–´ê·¸ë¨

### ëª¨ë†€ë¦¬ì‹ vs ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ëª¨ë†€ë¦¬ì‹ (Monolithic)                         â”‚
â”‚                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                      í•˜ë‚˜ì˜ ì„œë²„                             â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚    â”‚
â”‚  â”‚  â”‚   User   â”‚ Product  â”‚   Cart   â”‚  Order   â”‚ Payment  â”‚ â”‚    â”‚
â”‚  â”‚  â”‚  Module  â”‚  Module  â”‚  Module  â”‚  Module  â”‚  Module  â”‚ â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚    â”‚
â”‚  â”‚                         â”‚                                   â”‚    â”‚
â”‚  â”‚                   â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”                            â”‚    â”‚
â”‚  â”‚                   â”‚    DB     â”‚                            â”‚    â”‚
â”‚  â”‚                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                            â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ (Microservice)                   â”‚
â”‚                                                                      â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚         â”‚            API Gateway                   â”‚                 â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚                              â”‚                                       â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚    â”‚        â”‚        â”‚            â”‚        â”‚        â”‚              â”‚
â”‚    â–¼        â–¼        â–¼            â–¼        â–¼        â–¼              â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”           â”‚
â”‚ â”‚ User â”‚ â”‚ Prod â”‚ â”‚ Cart â”‚  â”‚Order â”‚ â”‚Paymt â”‚ â”‚Searchâ”‚           â”‚
â”‚ â”‚ Svc  â”‚ â”‚ Svc  â”‚ â”‚ Svc  â”‚  â”‚ Svc  â”‚ â”‚ Svc  â”‚ â”‚ Svc  â”‚           â”‚
â”‚ â””â”€â”€â”¬â”€â”€â”€â”˜ â””â”€â”€â”¬â”€â”€â”€â”˜ â””â”€â”€â”¬â”€â”€â”€â”˜  â””â”€â”€â”¬â”€â”€â”€â”˜ â””â”€â”€â”¬â”€â”€â”€â”˜ â””â”€â”€â”¬â”€â”€â”€â”˜           â”‚
â”‚    â”‚        â”‚        â”‚         â”‚        â”‚        â”‚                â”‚
â”‚    â–¼        â–¼        â–¼         â–¼        â–¼        â–¼                â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”           â”‚
â”‚ â”‚  DB  â”‚ â”‚  DB  â”‚ â”‚  DB  â”‚  â”‚  DB  â”‚ â”‚  DB  â”‚ â”‚Elasticâ”‚          â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ í†µì‹  íŒ¨í„´

```
                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                      â”‚   Mobile App    â”‚
                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚ HTTPS
                               â–¼
                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                      â”‚   API Gateway   â”‚
                      â”‚  (ë¼ìš°íŒ…, ì¸ì¦)  â”‚
                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                     â”‚                     â”‚
         â–¼                     â–¼                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Order Service  â”‚   â”‚  User Service   â”‚   â”‚ Product Service â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                     â”‚                     â”‚
         â”‚     ë™ê¸° í†µì‹  (REST/gRPC)                 â”‚
         â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
         â”‚                     â”‚                     â”‚
         â”‚     ë¹„ë™ê¸° í†µì‹  (Message Queue)           â”‚
         â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
         â”‚                     â”‚                     â”‚
         â–¼                     â–¼                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Message Bus   â”‚â—„â”€â”€â”‚   Message Bus   â”‚â”€â”€â–ºâ”‚   Message Bus   â”‚
â”‚    (Kafka)      â”‚   â”‚    (Kafka)      â”‚   â”‚    (Kafka)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Mermaid ë‹¤ì´ì–´ê·¸ë¨

```mermaid
graph TB
    subgraph Client
        APP[Mobile App]
        WEB[Web App]
    end

    subgraph Gateway
        AG[API Gateway]
        AUTH[Auth Service]
    end

    subgraph Services
        US[User Service]
        PS[Product Service]
        CS[Cart Service]
        OS[Order Service]
        PMS[Payment Service]
    end

    subgraph Data
        UDB[(User DB)]
        PDB[(Product DB)]
        CDB[(Cart DB)]
        ODB[(Order DB)]
        PMDB[(Payment DB)]
    end

    subgraph Messaging
        KAFKA[Kafka]
    end

    APP --> AG
    WEB --> AG
    AG --> AUTH
    AG --> US
    AG --> PS
    AG --> CS
    AG --> OS
    AG --> PMS

    US --> UDB
    PS --> PDB
    CS --> CDB
    OS --> ODB
    PMS --> PMDB

    OS --> KAFKA
    PMS --> KAFKA
    US --> KAFKA

    style Gateway fill:#e8f5e9
    style Services fill:#e3f2fd
    style Data fill:#fff3e0
    style Messaging fill:#fce4ec
```

---

## 4. ì‹¤ë¬´ ì ìš© ì˜ˆì‹œ

### ì˜ˆì‹œ: ì´ì»¤ë¨¸ìŠ¤ ì„œë¹„ìŠ¤ ë¶„ë¦¬

**ì‹œë‚˜ë¦¬ì˜¤**: ëª¨ë†€ë¦¬ì‹ ì´ì»¤ë¨¸ìŠ¤ ì„œë²„ë¥¼ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ë¡œ ì „í™˜

```
Before (ëª¨ë†€ë¦¬ì‹)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           shop-server              â”‚
â”‚  - UserController                  â”‚
â”‚  - ProductController               â”‚
â”‚  - CartController                  â”‚
â”‚  - OrderController                 â”‚
â”‚  - PaymentController               â”‚
â”‚  - ëª¨ë“  ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§               â”‚
â”‚  - í•˜ë‚˜ì˜ ê±°ëŒ€í•œ DB                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

After (ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚user-svc  â”‚ â”‚product-  â”‚ â”‚cart-svc  â”‚
â”‚          â”‚ â”‚svc       â”‚ â”‚          â”‚
â”‚PostgreSQLâ”‚ â”‚PostgreSQLâ”‚ â”‚  Redis   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚order-svc â”‚ â”‚payment-  â”‚ â”‚search-svcâ”‚
â”‚          â”‚ â”‚svc       â”‚ â”‚          â”‚
â”‚PostgreSQLâ”‚ â”‚PostgreSQLâ”‚ â”‚Elastic   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ì„œë¹„ìŠ¤ ê°„ í†µì‹  ì˜ˆì‹œ

```python
# order-service/app.py

from flask import Flask, request
import requests

app = Flask(__name__)

# ì„œë¹„ìŠ¤ ë””ìŠ¤ì»¤ë²„ë¦¬ (ì˜ˆ: Kubernetes Service DNS)
USER_SERVICE = "http://user-service:8080"
PRODUCT_SERVICE = "http://product-service:8080"
PAYMENT_SERVICE = "http://payment-service:8080"

@app.route('/orders', methods=['POST'])
def create_order():
    data = request.json

    # 1. ì‚¬ìš©ì ê²€ì¦ (ë™ê¸° í†µì‹ )
    user_response = requests.get(
        f"{USER_SERVICE}/users/{data['user_id']}"
    )
    if user_response.status_code != 200:
        return {"error": "User not found"}, 404

    # 2. ìƒí’ˆ ì •ë³´ ì¡°íšŒ (ë™ê¸° í†µì‹ )
    product_response = requests.get(
        f"{PRODUCT_SERVICE}/products/{data['product_id']}"
    )
    if product_response.status_code != 200:
        return {"error": "Product not found"}, 404

    product = product_response.json()

    # 3. ì£¼ë¬¸ ìƒì„±
    order = create_order_in_db(data, product)

    # 4. ê²°ì œ ìš”ì²­ (ë™ê¸° í†µì‹ )
    payment_response = requests.post(
        f"{PAYMENT_SERVICE}/payments",
        json={
            "order_id": order['id'],
            "amount": product['price'],
            "user_id": data['user_id']
        }
    )

    if payment_response.status_code != 200:
        # ë³´ìƒ íŠ¸ëœì­ì…˜: ì£¼ë¬¸ ì·¨ì†Œ
        cancel_order(order['id'])
        return {"error": "Payment failed"}, 400

    return {"order": order}, 201
```

### ë¹„ë™ê¸° ì´ë²¤íŠ¸ ì²˜ë¦¬ ì˜ˆì‹œ

```python
# order-service/events.py

from kafka import KafkaProducer, KafkaConsumer
import json

producer = KafkaProducer(
    bootstrap_servers=['kafka:9092'],
    value_serializer=lambda v: json.dumps(v).encode('utf-8')
)

def publish_order_created(order):
    """ì£¼ë¬¸ ìƒì„± ì´ë²¤íŠ¸ ë°œí–‰"""
    producer.send('order-events', {
        'type': 'ORDER_CREATED',
        'order_id': order['id'],
        'user_id': order['user_id'],
        'items': order['items'],
        'total_price': order['total_price'],
        'timestamp': datetime.now().isoformat()
    })

# payment-service/consumer.py

def handle_order_events():
    """ì£¼ë¬¸ ì´ë²¤íŠ¸ êµ¬ë…"""
    consumer = KafkaConsumer(
        'order-events',
        bootstrap_servers=['kafka:9092'],
        group_id='payment-service',
        value_deserializer=lambda v: json.loads(v.decode('utf-8'))
    )

    for message in consumer:
        event = message.value
        if event['type'] == 'ORDER_CREATED':
            process_payment(event)
        elif event['type'] == 'ORDER_CANCELLED':
            refund_payment(event)
```

### ëª¨ë°”ì¼ ì•±ì—ì„œì˜ API í˜¸ì¶œ

```kotlin
// ëª¨ë°”ì¼ ì•± ì…ì¥ì—ì„œëŠ” API Gatewayë§Œ ì•Œë©´ ë¨

interface ShopApi {
    // API Gatewayê°€ ë‚´ë¶€ì ìœ¼ë¡œ user-serviceë¡œ ë¼ìš°íŒ…
    @GET("/api/users/{userId}")
    suspend fun getUser(@Path("userId") userId: String): User

    // API Gatewayê°€ ë‚´ë¶€ì ìœ¼ë¡œ product-serviceë¡œ ë¼ìš°íŒ…
    @GET("/api/products")
    suspend fun getProducts(): List<Product>

    // API Gatewayê°€ ë‚´ë¶€ì ìœ¼ë¡œ order-serviceë¡œ ë¼ìš°íŒ…
    @POST("/api/orders")
    suspend fun createOrder(@Body request: CreateOrderRequest): Order
}

// ëª¨ë°”ì¼ ê°œë°œìê°€ ì•Œì•„ì•¼ í•  ê²ƒ:
// 1. ë°±ì—”ë“œ êµ¬ì¡°ê°€ ë°”ë€Œì–´ë„ API ìŠ¤í™ë§Œ ê°™ìœ¼ë©´ ì•± ì½”ë“œ ë³€ê²½ ë¶ˆí•„ìš”
// 2. íŠ¹ì • API ì‘ë‹µì´ ëŠë¦¬ë‹¤ë©´ í•´ë‹¹ ì„œë¹„ìŠ¤ì˜ ì„±ëŠ¥ ë¬¸ì œì¼ ê°€ëŠ¥ì„±
// 3. ë¶€ë¶„ ì¥ì•  ì‹œ ì¼ë¶€ ê¸°ëŠ¥ë§Œ ì•ˆ ë  ìˆ˜ ìˆìŒ (Graceful Degradation ê³ ë ¤)
```

---

## 5. ì¥ë‹¨ì 

### ì¥ì 

| ì¥ì  | ì„¤ëª… |
|:---|:---|
| **ë…ë¦½ì  ë°°í¬** | ê° ì„œë¹„ìŠ¤ë¥¼ ê°œë³„ì ìœ¼ë¡œ ë°°í¬ ê°€ëŠ¥, ë°°í¬ ë¦¬ìŠ¤í¬ ê°ì†Œ |
| **ê¸°ìˆ  ë‹¤ì–‘ì„±** | ì„œë¹„ìŠ¤ë³„ë¡œ ìµœì ì˜ ê¸°ìˆ  ìŠ¤íƒ ì„ íƒ ê°€ëŠ¥ |
| **í™•ì¥ì„±** | íŠ¸ë˜í”½ì´ ë§ì€ ì„œë¹„ìŠ¤ë§Œ ì„ íƒì ìœ¼ë¡œ ìŠ¤ì¼€ì¼ ì•„ì›ƒ |
| **ì¥ì•  ê²©ë¦¬** | í•œ ì„œë¹„ìŠ¤ì˜ ì¥ì• ê°€ ì „ì²´ ì‹œìŠ¤í…œì— ì˜í–¥ì„ ì£¼ì§€ ì•ŠìŒ |
| **íŒ€ ììœ¨ì„±** | ì„œë¹„ìŠ¤ë³„ë¡œ íŒ€ì„ ë‚˜ëˆ  ë…ë¦½ì ìœ¼ë¡œ ìš´ì˜ |
| **ì‘ì€ ì½”ë“œë² ì´ìŠ¤** | ê° ì„œë¹„ìŠ¤ê°€ ì‘ì•„ì„œ ì´í•´í•˜ê³  ìœ ì§€ë³´ìˆ˜í•˜ê¸° ì‰¬ì›€ |

### ë‹¨ì 

| ë‹¨ì  | ì„¤ëª… |
|:---|:---|
| **ë¶„ì‚° ì‹œìŠ¤í…œ ë³µì¡ì„±** | ë„¤íŠ¸ì›Œí¬ ì¥ì• , ì§€ì—°, ë°ì´í„° ì¼ê´€ì„± ë¬¸ì œ |
| **ìš´ì˜ ë¶€ë‹´** | ìˆ˜ì‹­ ê°œì˜ ì„œë¹„ìŠ¤ ëª¨ë‹ˆí„°ë§, ë¡œê¹…, ë°°í¬ íŒŒì´í”„ë¼ì¸ |
| **ë°ì´í„° ì¼ê´€ì„±** | ë¶„ì‚° íŠ¸ëœì­ì…˜ì´ ì–´ë ¤ì›€, ìµœì¢… ì¼ê´€ì„± íŒ¨í„´ í•„ìš” |
| **í…ŒìŠ¤íŠ¸ ë³µì¡ì„±** | ì„œë¹„ìŠ¤ ê°„ í†µí•© í…ŒìŠ¤íŠ¸ê°€ ì–´ë ¤ì›€ |
| **ê°œë°œì ìŠ¤í‚¬ ìš”êµ¬** | DevOps, ì»¨í…Œì´ë„ˆ, ë©”ì‹œì§€ í ë“± ê´‘ë²”ìœ„í•œ ì§€ì‹ í•„ìš” |
| **ì´ˆê¸° ë¹„ìš©** | ì¸í”„ë¼ êµ¬ì¶•, ëª¨ë‹ˆí„°ë§ ë„êµ¬ ë“± ì´ˆê¸° íˆ¬ì í•„ìš” |

### ì–¸ì œ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ë¥¼ ë„ì…í•´ì•¼ í•˜ëŠ”ê°€?

```
ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ë„ì… ì²´í¬ë¦¬ìŠ¤íŠ¸
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ“ íŒ€ ê·œëª¨ê°€ ì¶©ë¶„íˆ í°ê°€? (ìµœì†Œ 2~3ê°œ íŒ€ ì´ìƒ)
âœ“ ì„œë¹„ìŠ¤ ê°„ ê²½ê³„ê°€ ëª…í™•í•œê°€?
âœ“ DevOps ì—­ëŸ‰ì´ ìˆëŠ”ê°€?
âœ“ ëª¨ë†€ë¦¬ì‹ì˜ í•œê³„ë¥¼ ì‹¤ì œë¡œ ê²ªê³  ìˆëŠ”ê°€?

í•˜ë‚˜ë¼ë„ NOë¼ë©´ ëª¨ë†€ë¦¬ì‹ ìœ ì§€ë¥¼ ê¶Œì¥
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

"ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ëŠ” ëª¨ë†€ë¦¬ì‹ì´ ì„±ê³µí•œ í›„ì— ë¶„ë¦¬í•˜ë¼"
                        - Martin Fowler
```

### ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ vs ëª¨ë†€ë¦¬ì‹ ë¹„êµ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       í•­ëª©         â”‚    ëª¨ë†€ë¦¬ì‹       â”‚   ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ë°°í¬              â”‚ ì „ì²´ ë°°í¬         â”‚ ê°œë³„ ë°°í¬         â”‚
â”‚ í™•ì¥              â”‚ ì „ì²´ ìŠ¤ì¼€ì¼ë§     â”‚ ì„ íƒì  ìŠ¤ì¼€ì¼ë§   â”‚
â”‚ ê¸°ìˆ  ìŠ¤íƒ         â”‚ ë‹¨ì¼ ìŠ¤íƒ         â”‚ ë‹¤ì–‘í•œ ìŠ¤íƒ       â”‚
â”‚ ë°ì´í„° ì¼ê´€ì„±     â”‚ ACID íŠ¸ëœì­ì…˜    â”‚ ìµœì¢… ì¼ê´€ì„±       â”‚
â”‚ ë³µì¡ì„±            â”‚ ì½”ë“œ ë³µì¡         â”‚ ìš´ì˜ ë³µì¡         â”‚
â”‚ ì‹œì‘ ë¹„ìš©         â”‚ ë‚®ìŒ             â”‚ ë†’ìŒ              â”‚
â”‚ ì í•©í•œ íŒ€ ê·œëª¨    â”‚ 1~20ëª…           â”‚ 20ëª… ì´ìƒ         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 6. ë‚´ ìƒê°

> ì´ ì„¹ì…˜ì€ í•™ìŠµ í›„ ë³¸ì¸ì˜ ìƒê°ì„ ì •ë¦¬í•˜ëŠ” ê³µê°„ì…ë‹ˆë‹¤.

**Q1. í˜„ì¬/ê³¼ê±° í”„ë¡œì íŠ¸ì—ì„œ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ê°€ í•„ìš”í–ˆë˜ ìƒí™©ì€?**

```
(ì‘ì„±í•´ë³´ì„¸ìš”)


```

**Q2. ëª¨ë°”ì¼ ê°œë°œìë¡œì„œ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ í™˜ê²½ì—ì„œ ì£¼ì˜í•´ì•¼ í•  ì ì€?**

```
(ì‘ì„±í•´ë³´ì„¸ìš”)


```

**Q3. ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ë„ì… ì‹œ ê°€ì¥ ì–´ë ¤ìš¸ ê²ƒ ê°™ì€ ë¶€ë¶„ì€?**

```
(ì‘ì„±í•´ë³´ì„¸ìš”)


```

---

## 7. ì¶”ê°€ ì§ˆë¬¸

ë” ê¹Šì´ í•™ìŠµí•˜ê¸° ìœ„í•œ ì§ˆë¬¸ë“¤ì…ë‹ˆë‹¤.

### ê¸°ì´ˆ ì§ˆë¬¸

**1. ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ì—ì„œ "ë§ˆì´í¬ë¡œ"ì˜ ê¸°ì¤€ì€ ë¬´ì—‡ì¸ê°€? ì–¼ë§ˆë‚˜ ì‘ì•„ì•¼ ë§ˆì´í¬ë¡œì¸ê°€?**

> **ë‹µë³€**: "ë§ˆì´í¬ë¡œ"ëŠ” ì½”ë“œ ë¼ì¸ ìˆ˜ê°€ ì•„ë‹ˆë¼ **ì±…ì„ì˜ ë²”ìœ„**ë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤. Sam Newmanì˜ ì •ì˜ì— ë”°ë¥´ë©´, ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ëŠ” "í•œ íŒ€ì´ ì†Œìœ í•˜ê³ , ë…ë¦½ì ìœ¼ë¡œ ë°°í¬í•  ìˆ˜ ìˆëŠ” í¬ê¸°"ì…ë‹ˆë‹¤.
>
> **ì‹¤ìš©ì ì¸ ê¸°ì¤€**:
> - **2 Pizza Rule (Amazon)**: í•œ ì„œë¹„ìŠ¤ë¥¼ ë‹´ë‹¹í•˜ëŠ” íŒ€ì´ í”¼ì 2íŒìœ¼ë¡œ ì‹ì‚¬í•  ìˆ˜ ìˆëŠ” í¬ê¸° (5-8ëª…)
> - **ì¸ì§€ì  ë¶€ë‹´**: ìƒˆë¡œìš´ ê°œë°œìê°€ 2ì£¼ ì•ˆì— ì „ì²´ ì½”ë“œë¥¼ ì´í•´í•  ìˆ˜ ìˆì–´ì•¼ í•¨
> - **ë‹¨ì¼ ì±…ì„**: í•˜ë‚˜ì˜ ë¹„ì¦ˆë‹ˆìŠ¤ ë„ë©”ì¸ë§Œ ë‹´ë‹¹ (ì˜ˆ: ê²°ì œ, ì¬ê³ , ë°°ì†¡)
> - **ë…ë¦½ ë°°í¬ ê°€ëŠ¥ì„±**: ë‹¤ë¥¸ ì„œë¹„ìŠ¤ ìˆ˜ì • ì—†ì´ ë‹¨ë… ë°°í¬ ê°€ëŠ¥í•´ì•¼ í•¨
>
> **ì£¼ì˜**: ë„ˆë¬´ ì‘ê²Œ ë‚˜ëˆ„ë©´ "ë‚˜ë…¸ì„œë¹„ìŠ¤(Nanoservice)"ê°€ ë˜ì–´ ì˜¤íˆë ¤ ë³µì¡ë„ê°€ ì¦ê°€í•©ë‹ˆë‹¤. í•˜ë‚˜ì˜ API í˜¸ì¶œì— 10ê°œ ì„œë¹„ìŠ¤ê°€ ì—°ì‡„ í˜¸ì¶œëœë‹¤ë©´ ë„ˆë¬´ ì˜ê²Œ ë‚˜ëˆˆ ê²ƒì…ë‹ˆë‹¤.
>
> **Netflix ì‚¬ë¡€**: NetflixëŠ” ì•½ 700ê°œì˜ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ë¥¼ ìš´ì˜í•˜ì§€ë§Œ, ê° ì„œë¹„ìŠ¤ëŠ” ëª…í™•í•œ ë„ë©”ì¸ ê²½ê³„ë¥¼ ê°€ì§‘ë‹ˆë‹¤. ì˜ˆ: `playback-service`, `recommendation-service`, `billing-service`

**2. API Gatewayì˜ ì—­í• ì€ ë¬´ì—‡ì´ê³ , ì—†ìœ¼ë©´ ì–´ë–¤ ë¬¸ì œê°€ ìƒê¸°ëŠ”ê°€?**

> **ë‹µë³€**: API GatewayëŠ” ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ì˜ **ë‹¨ì¼ ì§„ì…ì (Single Entry Point)**ì…ë‹ˆë‹¤. í´ë¼ì´ì–¸íŠ¸ì™€ ë‚´ë¶€ ì„œë¹„ìŠ¤ ì‚¬ì´ì˜ ì¤‘ê°œì ì—­í• ì„ í•©ë‹ˆë‹¤.
>
> **ì£¼ìš” ì—­í• **:
> - **ë¼ìš°íŒ…**: `/users/*` â†’ User Service, `/orders/*` â†’ Order Service
> - **ì¸ì¦/ì¸ê°€**: JWT ê²€ì¦, API Key í™•ì¸ì„ í•œ ê³³ì—ì„œ ì²˜ë¦¬
> - **ì†ë„ ì œí•œ(Rate Limiting)**: ì•…ì˜ì ì¸ ìš”ì²­ì´ë‚˜ DDoS ë°©ì–´
> - **ìš”ì²­/ì‘ë‹µ ë³€í™˜**: í´ë¼ì´ì–¸íŠ¸ì— ë§ê²Œ ì‘ë‹µ í˜•ì‹ ë³€í™˜
> - **ë¡œë“œ ë°¸ëŸ°ì‹±**: íŠ¸ë˜í”½ì„ ì—¬ëŸ¬ ì¸ìŠ¤í„´ìŠ¤ì— ë¶„ì‚°
> - **ìºì‹±**: ìì£¼ ìš”ì²­ë˜ëŠ” ë°ì´í„° ìºì‹±ìœ¼ë¡œ ì„±ëŠ¥ í–¥ìƒ
>
> **API Gateway ì—†ì´ ë°œìƒí•˜ëŠ” ë¬¸ì œ**:
> ```
> ëª¨ë°”ì¼ ì•±ì´ ì§ì ‘ ê° ì„œë¹„ìŠ¤ í˜¸ì¶œ ì‹œ:
>
> â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
> â”‚ Mobile App  â”‚
> â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
>       â”œâ”€â”€â”€â”€â”€â”€â–º User Service (ì¸ì¦ êµ¬í˜„)
>       â”œâ”€â”€â”€â”€â”€â”€â–º Product Service (ì¸ì¦ êµ¬í˜„)
>       â”œâ”€â”€â”€â”€â”€â”€â–º Order Service (ì¸ì¦ êµ¬í˜„)
>       â””â”€â”€â”€â”€â”€â”€â–º Payment Service (ì¸ì¦ êµ¬í˜„)
>
> ë¬¸ì œ:
> - ì•±ì´ ëª¨ë“  ì„œë¹„ìŠ¤ ì£¼ì†Œë¥¼ ì•Œì•„ì•¼ í•¨
> - ì¸ì¦ ë¡œì§ì´ ê° ì„œë¹„ìŠ¤ì— ì¤‘ë³µ
> - CORS ì„¤ì •ì´ ë³µì¡í•´ì§
> - ì„œë¹„ìŠ¤ URL ë³€ê²½ ì‹œ ì•± ì—…ë°ì´íŠ¸ í•„ìš”
> ```
>
> **ì‹¤ë¬´ ë„êµ¬**: Kong, AWS API Gateway, Netflix Zuul, Spring Cloud Gateway

**3. ì„œë¹„ìŠ¤ ë””ìŠ¤ì»¤ë²„ë¦¬ë€ ë¬´ì—‡ì´ê³ , ì™œ í•„ìš”í•œê°€?**

> **ë‹µë³€**: ì„œë¹„ìŠ¤ ë””ìŠ¤ì»¤ë²„ë¦¬ëŠ” **ë™ì ìœ¼ë¡œ ë³€í•˜ëŠ” ì„œë¹„ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ì˜ ìœ„ì¹˜ë¥¼ ìë™ìœ¼ë¡œ ì°¾ì•„ì£¼ëŠ” ë©”ì»¤ë‹ˆì¦˜**ì…ë‹ˆë‹¤.
>
> **ì™œ í•„ìš”í•œê°€?**
> - í´ë¼ìš°ë“œ í™˜ê²½ì—ì„œ ì„œë¹„ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ëŠ” ìˆ˜ì‹œë¡œ ìƒì„±/ì‚­ì œë¨
> - IP ì£¼ì†Œê°€ ê³ ì •ë˜ì§€ ì•ŠìŒ
> - Auto Scalingìœ¼ë¡œ ì¸ìŠ¤í„´ìŠ¤ ìˆ˜ê°€ ë™ì ìœ¼ë¡œ ë³€í•¨
>
> **ì‘ë™ ë°©ì‹**:
> ```
> 1. ì„œë¹„ìŠ¤ ë“±ë¡ (Registration)
>    Order Service ì‹œì‘ â†’ Service Registryì— "ë‚˜ ì—¬ê¸° ìˆì–´" ë“±ë¡
>
> 2. í•˜íŠ¸ë¹„íŠ¸ (Heartbeat)
>    ì£¼ê¸°ì ìœ¼ë¡œ "ë‚˜ ì‚´ì•„ìˆì–´" ì‹ í˜¸ ì „ì†¡
>
> 3. ì„œë¹„ìŠ¤ ë°œê²¬ (Discovery)
>    User Serviceê°€ Order Service í˜¸ì¶œ í•„ìš”
>    â†’ Registryì—ì„œ Order Service ì£¼ì†Œ ì¡°íšŒ
>    â†’ ì—¬ëŸ¬ ì¸ìŠ¤í„´ìŠ¤ ì¤‘ í•˜ë‚˜ ì„ íƒ (ë¡œë“œë°¸ëŸ°ì‹±)
>
> 4. ìë™ ì œê±° (Deregistration)
>    í•˜íŠ¸ë¹„íŠ¸ê°€ ëŠê¸°ë©´ Registryì—ì„œ ìë™ ì‚­ì œ
> ```
>
> **ì‹¤ë¬´ ë„êµ¬**:
> - **Kubernetes**: ìì²´ DNS ê¸°ë°˜ ì„œë¹„ìŠ¤ ë””ìŠ¤ì»¤ë²„ë¦¬ ì œê³µ
> - **Consul**: HashiCorpì˜ ì„œë¹„ìŠ¤ ë©”ì‹œ ì†”ë£¨ì…˜
> - **Eureka**: Netflixê°€ ë§Œë“  ì„œë¹„ìŠ¤ ë””ìŠ¤ì»¤ë²„ë¦¬ (Spring Cloudì™€ ì˜ í†µí•©)

### ì‹¬í™” ì§ˆë¬¸

**4. ë¶„ì‚° íŠ¸ëœì­ì…˜ ë¬¸ì œë¥¼ í•´ê²°í•˜ëŠ” Saga íŒ¨í„´ì´ë€?**

> **ë‹µë³€**: Saga íŒ¨í„´ì€ **ì—¬ëŸ¬ ì„œë¹„ìŠ¤ì— ê±¸ì¹œ íŠ¸ëœì­ì…˜ì„ ì¼ë ¨ì˜ ë¡œì»¬ íŠ¸ëœì­ì…˜ìœ¼ë¡œ ë¶„í•´**í•˜ê³ , ì‹¤íŒ¨ ì‹œ **ë³´ìƒ íŠ¸ëœì­ì…˜(Compensating Transaction)**ìœ¼ë¡œ ë¡¤ë°±í•˜ëŠ” íŒ¨í„´ì…ë‹ˆë‹¤.
>
> **ë¬¸ì œ ìƒí™©**:
> ```
> ì£¼ë¬¸ í”„ë¡œì„¸ìŠ¤:
> 1. Order Service: ì£¼ë¬¸ ìƒì„±
> 2. Inventory Service: ì¬ê³  ì°¨ê°
> 3. Payment Service: ê²°ì œ ì²˜ë¦¬  â† ì—¬ê¸°ì„œ ì‹¤íŒ¨í•˜ë©´?
>
> ê¸°ì¡´ ACID íŠ¸ëœì­ì…˜ì²˜ëŸ¼ í•œë²ˆì— ë¡¤ë°± ë¶ˆê°€ëŠ¥!
> (ê° ì„œë¹„ìŠ¤ê°€ ë‹¤ë¥¸ DBë¥¼ ì‚¬ìš©í•˜ë¯€ë¡œ)
> ```
>
> **Saga íŒ¨í„´ì˜ ë‘ ê°€ì§€ êµ¬í˜„ ë°©ì‹**:
>
> **1. Choreography (ì´ë²¤íŠ¸ ê¸°ë°˜)**
> ```
> Order Created â†’ Inventoryê°€ ë“£ê³  ì¬ê³  ì°¨ê°
>              â†’ Inventory Reserved ì´ë²¤íŠ¸ ë°œí–‰
>              â†’ Paymentê°€ ë“£ê³  ê²°ì œ ì‹œë„
>              â†’ Payment Failed ì´ë²¤íŠ¸ ë°œí–‰
>              â†’ Inventoryê°€ ë“£ê³  ì¬ê³  ë³µêµ¬ (ë³´ìƒ)
>              â†’ Orderê°€ ë“£ê³  ì£¼ë¬¸ ì·¨ì†Œ (ë³´ìƒ)
> ```
>
> **2. Orchestration (ì¤‘ì•™ ì¡°ì •ì)**
> ```
> Order Saga Orchestrator:
> 1. Order Service í˜¸ì¶œ â†’ ì„±ê³µ
> 2. Inventory Service í˜¸ì¶œ â†’ ì„±ê³µ
> 3. Payment Service í˜¸ì¶œ â†’ ì‹¤íŒ¨
> 4. Inventory ë³´ìƒ í˜¸ì¶œ (ì¬ê³  ë³µêµ¬)
> 5. Order ë³´ìƒ í˜¸ì¶œ (ì£¼ë¬¸ ì·¨ì†Œ)
> ```
>
> **ë°°ë‹¬ì˜ë¯¼ì¡± ì‚¬ë¡€**: ì£¼ë¬¸-ê²°ì œ-ì¿ í°-í¬ì¸íŠ¸ê°€ ê°ê° ë‹¤ë¥¸ ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤. ê²°ì œ ì‹¤íŒ¨ ì‹œ ì´ë¯¸ ì°¨ê°ëœ í¬ì¸íŠ¸ì™€ ì ìš©ëœ ì¿ í°ì„ ë³µêµ¬í•˜ëŠ” ë³´ìƒ íŠ¸ëœì­ì…˜ì´ ì‹¤í–‰ë©ë‹ˆë‹¤.

**5. ì„œë¹„ìŠ¤ ê°„ í†µì‹ ì—ì„œ ë™ê¸°(REST) vs ë¹„ë™ê¸°(ë©”ì‹œì§€ í)ë¥¼ ì–´ë–»ê²Œ ì„ íƒí•˜ëŠ”ê°€?**

> **ë‹µë³€**: ì„ íƒ ê¸°ì¤€ì€ **ì¦‰ì‹œ ì‘ë‹µ í•„ìš” ì—¬ë¶€**ì™€ **ì‹¤íŒ¨ í—ˆìš© ë²”ìœ„**ì…ë‹ˆë‹¤.
>
> | ìƒí™© | ë™ê¸° (REST/gRPC) | ë¹„ë™ê¸° (Message Queue) |
> |:---|:---|:---|
> | ì¦‰ì‹œ ì‘ë‹µ í•„ìš” | O (ê²°ì œ ê²°ê³¼ í™•ì¸) | X |
> | ì‹¤íŒ¨ ì‹œ ì¬ì‹œë„ | í˜¸ì¶œìê°€ ì²˜ë¦¬ | ìë™ ì¬ì‹œë„ ê°€ëŠ¥ |
> | ê²°í•©ë„ | ê°•í•¨ (ì„œë¹„ìŠ¤ ì£¼ì†Œ ì•Œì•„ì•¼ í•¨) | ì•½í•¨ (í† í”½ë§Œ ì•Œë©´ ë¨) |
> | ì²˜ë¦¬ëŸ‰ | ë™ì‹œ ìš”ì²­ ìˆ˜ ì œí•œ | ëŒ€ëŸ‰ ì²˜ë¦¬ ê°€ëŠ¥ |
> | íŠ¸ë ˆì´ì‹± | ìƒëŒ€ì ìœ¼ë¡œ ì‰¬ì›€ | ë³µì¡í•¨ |
>
> **ì‹¤ë¬´ ê°€ì´ë“œë¼ì¸**:
> ```
> ë™ê¸° í†µì‹  ì‚¬ìš©:
> - ì‚¬ìš©ìê°€ ê²°ê³¼ë¥¼ ê¸°ë‹¤ë¦¬ëŠ” ê²½ìš° (ë¡œê·¸ì¸, ê²°ì œ)
> - ì‘ë‹µ ë°ì´í„°ë¡œ ë‹¤ìŒ ë¡œì§ì„ ì‹¤í–‰í•´ì•¼ í•˜ëŠ” ê²½ìš°
> - íŠ¸ëœì­ì…˜ ì„±ê³µ/ì‹¤íŒ¨ë¥¼ ì¦‰ì‹œ ì•Œì•„ì•¼ í•˜ëŠ” ê²½ìš°
>
> ë¹„ë™ê¸° í†µì‹  ì‚¬ìš©:
> - ì‹œê°„ì´ ì˜¤ë˜ ê±¸ë¦¬ëŠ” ì‘ì—… (ì´ë©”ì¼ ë°œì†¡, ì¸ë„¤ì¼ ìƒì„±)
> - ì—¬ëŸ¬ ì„œë¹„ìŠ¤ì— ë™ì‹œ ì•Œë¦¼ (ì£¼ë¬¸ ì™„ë£Œ â†’ ì¬ê³ , ë°°ì†¡, ì•Œë¦¼)
> - ì¼ì‹œì  ì¥ì•  í—ˆìš© ê°€ëŠ¥í•œ ê²½ìš°
> - í”¼í¬ íŠ¸ë˜í”½ ì™„ì¶©ì´ í•„ìš”í•œ ê²½ìš°
> ```
>
> **Uber ì‚¬ë¡€**: ë°°ì°¨ ìš”ì²­ì€ ë™ê¸°(ì¦‰ì‹œ ë“œë¼ì´ë²„ ë§¤ì¹­), ì˜ìˆ˜ì¦ ë°œì†¡ì€ ë¹„ë™ê¸°(ë‚˜ì¤‘ì— ì´ë©”ì¼ ë°œì†¡)

**6. ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ì—ì„œ ë°ì´í„° ì¤‘ë³µ(Denormalization)ì€ ì™œ í•„ìš”í•œê°€?**

> **ë‹µë³€**: ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ëŠ” **ê° ì„œë¹„ìŠ¤ê°€ ìì²´ DBë¥¼ ì†Œìœ **í•©ë‹ˆë‹¤(Database per Service). ë‹¤ë¥¸ ì„œë¹„ìŠ¤ì˜ DBë¥¼ ì§ì ‘ ì¡°íšŒí•˜ë©´ ê²°í•©ë„ê°€ ë†’ì•„ì§€ë¯€ë¡œ, í•„ìš”í•œ ë°ì´í„°ë¥¼ ë³µì œí•´ì„œ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤.
>
> **ì˜ˆì‹œ: ì£¼ë¬¸ ì„œë¹„ìŠ¤ì—ì„œ ìƒí’ˆëª… í‘œì‹œ**
> ```
> ì •ê·œí™”ëœ êµ¬ì¡° (ëª¨ë†€ë¦¬ì‹):
> Order í…Œì´ë¸”: order_id, product_id, quantity
> Product í…Œì´ë¸”: product_id, name, price
> â†’ JOINìœ¼ë¡œ ì¡°íšŒ
>
> ë¹„ì •ê·œí™”ëœ êµ¬ì¡° (ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤):
> Order Service DB:
>   order_id, product_id, product_name, product_price, quantity
>   (product_name, product_priceëŠ” ì£¼ë¬¸ ì‹œì ì— ë³µì‚¬)
>
> ì¥ì :
> - Product Service ì¥ì•  ì‹œì—ë„ ì£¼ë¬¸ ë‚´ì—­ ì¡°íšŒ ê°€ëŠ¥
> - JOIN ì—†ì´ ë¹ ë¥¸ ì¡°íšŒ
>
> íŠ¸ë ˆì´ë“œì˜¤í”„:
> - ìƒí’ˆëª…ì´ ë³€ê²½ë˜ë©´ ë™ê¸°í™” í•„ìš” (ì´ë²¤íŠ¸ë¡œ ì²˜ë¦¬)
> - ì €ì¥ ê³µê°„ ì•½ê°„ ì¦ê°€
> ```
>
> **ì¤‘ìš”**: ëª¨ë“  ë°ì´í„°ë¥¼ ë³µì œí•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼, **ì¡°íšŒ ì‹œ ìì£¼ í•„ìš”í•˜ê³ , ë³€ê²½ì´ ë“œë¬¸ ë°ì´í„°**ë§Œ ë³µì œí•©ë‹ˆë‹¤. ì‹¤ì‹œê°„ ì¬ê³  ìˆ˜ëŸ‰ ê°™ì€ ìì£¼ ë³€í•˜ëŠ” ë°ì´í„°ëŠ” API í˜¸ì¶œë¡œ ì¡°íšŒí•©ë‹ˆë‹¤.

### ì‹¤ì „ ì§ˆë¬¸

**7. ëª¨ë†€ë¦¬ì‹ì—ì„œ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ë¡œ ì „í™˜í•  ë•Œ ì–´ë–¤ ì„œë¹„ìŠ¤ë¶€í„° ë¶„ë¦¬í•´ì•¼ í•˜ëŠ”ê°€?**

> **ë‹µë³€**: ë‹¤ìŒ ìš°ì„ ìˆœìœ„ë¡œ ë¶„ë¦¬ë¥¼ ê³ ë ¤í•˜ì„¸ìš”:
>
> **1ìˆœìœ„: ë…ë¦½ì ì¸ ë„ë©”ì¸ì´ë©´ì„œ íŒ€ì´ ìˆëŠ” ê²½ìš°**
> - ì´ë¯¸ ë‹´ë‹¹ íŒ€ì´ ìˆê³  ë„ë©”ì¸ ê²½ê³„ê°€ ëª…í™•í•œ ê¸°ëŠ¥
> - ì˜ˆ: ê²°ì œíŒ€ â†’ Payment Service, ê²€ìƒ‰íŒ€ â†’ Search Service
>
> **2ìˆœìœ„: í™•ì¥ ìš”êµ¬ê°€ ë‹¤ë¥¸ ê¸°ëŠ¥**
> - íŠ¸ë˜í”½ íŒ¨í„´ì´ ë‹¤ë¥¸ ê¸°ëŠ¥ (ê²€ìƒ‰ì€ ì½ê¸° ì§‘ì¤‘, ê²°ì œëŠ” ì“°ê¸° ì§‘ì¤‘)
> - ë¸”ë™í”„ë¼ì´ë°ì´ì— ì£¼ë¬¸ ì„œë¹„ìŠ¤ë§Œ 10ë°° í™•ì¥ í•„ìš”
>
> **3ìˆœìœ„: ê¸°ìˆ  ìŠ¤íƒì´ ë‹¬ë¼ì•¼ í•˜ëŠ” ê¸°ëŠ¥**
> - ML ê¸°ë°˜ ì¶”ì²œì€ Python, ì£¼ë¬¸ ì²˜ë¦¬ëŠ” Java
> - ì‹¤ì‹œê°„ ì±„íŒ…ì€ Node.js
>
> **ë¶„ë¦¬ ìˆœì„œ (ì ì§„ì  ì ‘ê·¼)**:
> ```
> Phase 1: Strangler íŒ¨í„´ìœ¼ë¡œ API ë ˆì´ì–´ ë¶„ë¦¬
>          ê¸°ì¡´ ì½”ë“œ ìœ ì§€í•˜ë©´ì„œ ìƒˆ ì„œë¹„ìŠ¤ë¡œ íŠ¸ë˜í”½ ë¼ìš°íŒ…
>
> Phase 2: ë°ì´í„°ë² ì´ìŠ¤ ë¶„ë¦¬
>          ê°€ì¥ ì–´ë ¤ìš´ ë‹¨ê³„, ë°ì´í„° ë§ˆì´ê·¸ë ˆì´ì…˜ í•„ìš”
>
> Phase 3: ì´ë²¤íŠ¸ ê¸°ë°˜ í†µì‹  ë„ì…
>          ì„œë¹„ìŠ¤ ê°„ ê²°í•©ë„ ë‚®ì¶”ê¸°
> ```
>
> **ì‹¤íŒ¨ ì‚¬ë¡€**: í•œ ìŠ¤íƒ€íŠ¸ì—…ì´ í•œ ë²ˆì— ëª¨ë“  ê²ƒì„ ë¶„ë¦¬í•˜ë ¤ë‹¤ 6ê°œì›”ê°„ ìƒˆ ê¸°ëŠ¥ ê°œë°œì´ ì¤‘ë‹¨ë˜ì—ˆìŠµë‹ˆë‹¤. ì ì§„ì ìœ¼ë¡œ í•˜ë‚˜ì”© ë¶„ë¦¬í•˜ëŠ” ê²ƒì´ ì•ˆì „í•©ë‹ˆë‹¤.

**8. ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ í™˜ê²½ì—ì„œ ë””ë²„ê¹…ì€ ì–´ë–»ê²Œ í•˜ëŠ”ê°€? (ë¶„ì‚° ì¶”ì )**

> **ë‹µë³€**: ë¶„ì‚° í™˜ê²½ì—ì„œëŠ” í•˜ë‚˜ì˜ ìš”ì²­ì´ ì—¬ëŸ¬ ì„œë¹„ìŠ¤ë¥¼ ê±°ì¹˜ë¯€ë¡œ, **ë¶„ì‚° ì¶”ì (Distributed Tracing)**ì´ í•„ìˆ˜ì…ë‹ˆë‹¤.
>
> **í•µì‹¬ ê°œë…**:
> - **Trace**: í•˜ë‚˜ì˜ ìš”ì²­ ì „ì²´ ì—¬ì • (ì˜ˆ: ì‚¬ìš©ìì˜ ì£¼ë¬¸ ìš”ì²­)
> - **Span**: ê° ì„œë¹„ìŠ¤ì—ì„œì˜ ì‘ì—… ë‹¨ìœ„ (ì˜ˆ: DB ì¿¼ë¦¬, API í˜¸ì¶œ)
> - **Trace ID**: ì „ì²´ ìš”ì²­ì„ ì‹ë³„í•˜ëŠ” ê³ ìœ  ID
> - **Parent Span ID**: ë¶€ëª¨ ì‘ì—…ì„ ì—°ê²°í•˜ëŠ” ID
>
> **ì‘ë™ ë°©ì‹**:
> ```
> ì‚¬ìš©ì ìš”ì²­ â†’ API Gateway
>   â”‚ trace_id: abc123, span_id: 1
>   â””â”€â”€â–º Order Service
>         â”‚ trace_id: abc123, span_id: 2, parent: 1
>         â”œâ”€â”€â–º User Service
>         â”‚     trace_id: abc123, span_id: 3, parent: 2
>         â””â”€â”€â–º Payment Service
>               trace_id: abc123, span_id: 4, parent: 2
>
> Jaeger/Zipkin UIì—ì„œ abc123 ê²€ìƒ‰
> â†’ ì „ì²´ í˜¸ì¶œ íë¦„ê³¼ ê° êµ¬ê°„ ì†Œìš” ì‹œê°„ í™•ì¸
> ```
>
> **í•„ìˆ˜ ë„êµ¬**:
> - **Jaeger** (Uber ì˜¤í”ˆì†ŒìŠ¤): ê°€ì¥ ë§ì´ ì‚¬ìš©
> - **Zipkin** (Twitter ì˜¤í”ˆì†ŒìŠ¤)
> - **AWS X-Ray** (AWS í™˜ê²½)
> - **Datadog APM** (ìƒìš©)
>
> **ëª¨ë°”ì¼ ì—°ë™**: API ìš”ì²­ í—¤ë”ì— `X-Request-ID`ë¥¼ í¬í•¨í•˜ë©´, ì•±ì—ì„œ ë°œìƒí•œ ìš”ì²­ì„ ì„œë²„ ë¡œê·¸ì—ì„œ ì¶”ì í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

**9. ì„œë¹„ìŠ¤ê°€ 100ê°œ ì´ìƒì¼ ë•Œ ì–´ë–»ê²Œ ê´€ë¦¬í•˜ëŠ”ê°€?**

> **ë‹µë³€**: ëŒ€ê·œëª¨ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ í™˜ê²½ì—ì„œëŠ” **í”Œë«í¼ ì—”ì§€ë‹ˆì–´ë§**ê³¼ **ìë™í™”**ê°€ í•µì‹¬ì…ë‹ˆë‹¤.
>
> **Netflixì˜ ì „ëµ (700+ ì„œë¹„ìŠ¤)**:
>
> **1. í‘œì¤€í™”ëœ ì„œë¹„ìŠ¤ í…œí”Œë¦¿**
> ```
> ìƒˆ ì„œë¹„ìŠ¤ ìƒì„± ì‹œ ìë™ìœ¼ë¡œ:
> - CI/CD íŒŒì´í”„ë¼ì¸ ì„¤ì •
> - ëª¨ë‹ˆí„°ë§ ëŒ€ì‹œë³´ë“œ ìƒì„±
> - ë¡œê¹… ì„¤ì •
> - ì•ŒëŒ ê·œì¹™ ì ìš©
> - í—¬ìŠ¤ì²´í¬ ì—”ë“œí¬ì¸íŠ¸ í¬í•¨
> ```
>
> **2. ì„œë¹„ìŠ¤ ì¹´íƒˆë¡œê·¸**
> - ëª¨ë“  ì„œë¹„ìŠ¤ì˜ ë©”íƒ€ë°ì´í„° ê´€ë¦¬ (ë‹´ë‹¹ íŒ€, API ë¬¸ì„œ, ì˜ì¡´ì„±)
> - Backstage (Spotify ì˜¤í”ˆì†ŒìŠ¤) ê°™ì€ ë„êµ¬ í™œìš©
>
> **3. ì„œë¹„ìŠ¤ ë©”ì‹œ (Service Mesh)**
> - Istio, Linkerdë¡œ ì„œë¹„ìŠ¤ ê°„ í†µì‹  ì¶”ìƒí™”
> - íŠ¸ë˜í”½ ê´€ë¦¬, mTLS, ê´€ì°° ê°€ëŠ¥ì„±ì„ ì¸í”„ë¼ ë ˆë²¨ì—ì„œ ì²˜ë¦¬
> - ê° ì„œë¹„ìŠ¤ê°€ ì§ì ‘ êµ¬í˜„í•  í•„ìš” ì—†ìŒ
>
> **4. GitOps**
> - ëª¨ë“  ì¸í”„ë¼ ì„¤ì •ì„ Gitìœ¼ë¡œ ê´€ë¦¬
> - ì„œë¹„ìŠ¤ ë°°í¬, ë¡¤ë°±, ì„¤ì • ë³€ê²½ì„ PRë¡œ ì²˜ë¦¬
>
> **5. íŒ€ í† í´ë¡œì§€**
> - Platform Team: ê³µí†µ ì¸í”„ë¼, ê°œë°œì ë„êµ¬ ì œê³µ
> - Stream-aligned Team: ë¹„ì¦ˆë‹ˆìŠ¤ ê¸°ëŠ¥ ê°œë°œì— ì§‘ì¤‘
>
> **Uber ì‚¬ë¡€**: 2,000ê°œ ì´ìƒì˜ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ë¥¼ ê´€ë¦¬í•˜ë©°, ë‚´ë¶€ PaaSì¸ "Up"ì„ í†µí•´ ì„œë¹„ìŠ¤ ìƒì„±ë¶€í„° ë°°í¬ê¹Œì§€ ìë™í™”í–ˆìŠµë‹ˆë‹¤.

---

## ì°¸ê³  ìë£Œ

- [Microservices - Martin Fowler](https://martinfowler.com/articles/microservices.html)
- [Building Microservices - Sam Newman](https://www.oreilly.com/library/view/building-microservices/9781491950340/)
- [Netflix Tech Blog - Microservices Journey](https://netflixtechblog.com/)
- [Uber Engineering Blog](https://eng.uber.com/)
